<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Predictions - NALCO</title>
  <style>
    body { font-family: Arial, sans-serif; background: #f4f6f9; margin:0; padding:0; }
    header { background:#003366; color:white; padding:15px 20px; display:flex; justify-content:space-between; align-items:center; }
    header a { color:white; text-decoration:none; font-weight:bold; margin-left:10px; }
    .container { padding:20px; }
    h3 { color:#003366; margin-bottom:15px; }
    table { width:100%; border-collapse: collapse; background:white; box-shadow:0 2px 5px rgba(0,0,0,0.1); }
    th, td { border:1px solid #ddd; padding:10px; text-align:center; }
    th { background:#003366; color:white; }
    tr:nth-child(even){ background:#f9f9f9; }
    .high-risk { background:#ffe6e6; color:#a10000; font-weight:bold; }
  </style>
</head>
<body>
  <header>
    <div>NALCO Predictive Maintenance</div>
    <div>
      <a href="{{ url_for('main') }}">â¬… Back</a>
      Welcome, <b>{{ user }}</b> | <a href="{{ url_for('logout') }}">Logout</a>
    </div>
  </header>

  <div class="container">
    <h3>Predictions (Most Recent)</h3>
    <table>
      <tr>
        <th>Timestamp</th>
        <th>Equipment</th>
        <th>Predicted Probability</th>
        <th>Status</th>
      </tr>
      {% for row in predictions %}
      <tr class="{{ 'high-risk' if row.predicted_prob >= 0.65 else '' }}">
        <td>{{ row.timestamp }}</td>
        <td>{{ row.equipment_id }}</td>
        <td>{{ (row.predicted_prob*100)|round(1) }}%</td>
        <td>{{ 'At Risk' if row.predicted_label==1 else 'OK' }}</td>
      </tr>
      {% endfor %}
    </table>
  </div>
</body>
</html>
